<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- This viewport tag was already in your split version and is required for tablet use -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6-Minute Walk Test Calculator + Stopwatch</title>
  <!-- External stylesheet instead of inline styles from Original_index.html -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <h1>6-Minute Walk Test Calculator</h1>

    <!-- 
      In Original_index.html there was a paragraph explaining how the tool works.
      Keeping a short version here is useful for a new user and also shows how this build relates to the original.
    -->
    <div class="card">
      <p class="small-text">
        This tool uses cumulative lap times from a 50 m track plus sticky-note positions at each minute
        to calculate distance walked in each minute and totals over 6 minutes.
        The original page asked you to type lap times into a textarea.
        This version uses a built-in stopwatch that records lap times directly.
      </p>
    </div>

    <!-- 
      Two column layout on larger screens:
      - Original_index.html used layout-two for "Lap Times" and "Sticky-Note Positions".
      - Here we keep the same idea but the left side is now the stopwatch and live lap table.
      - Right side stays as the minute sticky-note entry.
      On tablets this feels natural and uses the horizontal space better.
    -->
    <div class="layout-two">
      <!-- TIMER + LAP RECORDER CARD -->
      <div class="card">
        <h2>Stopwatch and lap recorder</h2>
        <!-- 
          Original_index.html had a textarea for lap times.
          The user had to type cumulative times manually.
          This display replaces that workflow entirely with a real stopwatch.
        -->

        <div class="timer-display" id="timerDisplay">00:00.0</div>

        <div class="button-row">
          <!-- 
            toggleButton replaces a separate Start and Stop control.
            One button is easier to hit on a tablet with one hand.
          -->
          <button id="toggleButton">Start</button>
          <!-- Lap and Reset start disabled just like in your split version -->
          <button id="lapButton" disabled>Lap</button>
          <button id="resetButton" class="secondary" disabled>Reset</button>
        </div>

        <!-- 
          This table shows the cumulative lap times.
          In the original page the user would type them into a textarea.
          Now the stopwatch fills this table and the calculator reads from the internal lapTimes array.
        -->
        <div class="minute-grid-wrapper touch-safe">
          <table class="minute-grid" id="lapTable">
            <thead>
              <tr>
                <th>Lap #</th>
                <th>Time (mm:ss.s)</th>
              </tr>
            </thead>
            <tbody id="lapTableBody"></tbody>
          </table>
        </div>

        <!-- 
          This error block is new here, but the idea comes from the original lapError div.
          It is used to warn if a lap is ignored because its time is not later than the previous one.
        -->
        <div id="lapError" class="error"></div>
      </div>

      <!-- STICKY NOTE POSITIONS CARD -->
      <div class="card">
        <h2>Sticky-note positions (each minute)</h2>
        <!-- 
          This description is adapted from Original_index.html.
          The logic behind the calculator is the same:
          - One row per minute.
          - Position is between 0 and 25 m.
          - Direction is either "out" or "back".
        -->
        <div class="small-text">
          For each minute 1 to 6, enter the floor marking at that minute (0 to 25 m)
          and whether the subject was walking out (0 to 25 m) or back (25 to 0 m).
        </div>

        <div class="minute-grid-wrapper touch-safe">
          <table class="minute-grid">
            <thead>
              <tr>
                <th>Minute</th>
                <th>Position (m)</th>
                <th>Direction</th>
              </tr>
            </thead>
            <tbody>
              <!-- 
                The structure matches Original_index.html, but wording is slightly updated.
                Note the explicit value attributes on the select options, which the original already used.
                Your split index had dropped the values which is fine in practice but less explicit.
              -->
              <tr>
                <td>1</td>
                <td><input id="pos_1" type="number" min="0" max="25" step="0.1" /></td>
                <td>
                  <select id="dir_1">
                    <option value="out">out</option>
                    <option value="back">back</option>
                  </select>
                </td>
              </tr>
              <tr>
                <td>2</td>
                <td><input id="pos_2" type="number" min="0" max="25" step="0.1" /></td>
                <td>
                  <select id="dir_2">
                    <option value="out">out</option>
                    <option value="back">back</option>
                  </select>
                </td>
              </tr>
              <tr>
                <td>3</td>
                <td><input id="pos_3" type="number" min="0" max="25" step="0.1" /></td>
                <td>
                  <select id="dir_3">
                    <option value="out">out</option>
                    <option value="back">back</option>
                  </select>
                </td>
              </tr>
              <tr>
                <td>4</td>
                <td><input id="pos_4" type="number" min="0" max="25" step="0.1" /></td>
                <td>
                  <select id="dir_4">
                    <option value="out">out</option>
                    <option value="back">back</option>
                  </select>
                </td>
              </tr>
              <tr>
                <td>5</td>
                <td><input id="pos_5" type="number" min="0" max="25" step="0.1" /></td>
                <td>
                  <select id="dir_5">
                    <option value="out">out</option>
                    <option value="back">back</option>
                  </select>
                </td>
              </tr>
              <tr>
                <td>6</td>
                <td><input id="pos_6" type="number" min="0" max="25" step="0.1" /></td>
                <td>
                  <select id="dir_6">
                    <option value="out">out</option>
                    <option value="back">back</option>
                  </select>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 
          Same purpose as in Original_index.html.
          We reuse it in the new calculate() to show validation errors for positions and directions.
        -->
        <div id="minuteError" class="error"></div>
      </div>
    </div>

    <!-- CALC BUTTONS CARD -->
    <div class="card">
      <div class="button-row">
        <!-- Same ids as Original_index.html so the calculator logic stays recognizable -->
        <button id="calcButton">Calculate</button>
        <!-- Clear All now resets both stopwatch and minute inputs, as well as results -->
        <button id="clearAllButton" class="secondary">Clear all</button>
        <!-- Clear Results uses the same behavior as the original but leaves all inputs intact -->
        <button id="clearResultsButton" class="secondary">Clear results</button>
      </div>
    </div>

    <!-- RESULTS CARD -->
    <div class="card">
      <h2>Results</h2>
      <!-- 
        Same idea as the original pre block.
        The calculator writes the formatted per minute and totals output here.
      -->
      <pre id="resultsBox">Per-minute results will appear here.</pre>
    </div>
  </div>
  <!-- External javascript file instead of inline scripts from Original_index.html -->
  <script src="script.js"></script>
</body>
</html>
